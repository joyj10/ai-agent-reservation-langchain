from langchain.tools import tool

FAQ_MAP = {
    ("취소",): "[FAQ] 예약 취소는 예약 시간 2시간 전까지 가능합니다. 별도 수수료는 없습니다.",
    ("예약 방법", "어떻게"): "[FAQ] '날짜, 시간, 장소'를 입력해 주시면 AI가 자동으로 예약을 진행해 드립니다.",
    ("변경", "수정", "시간 바꾸"): "[FAQ] 예약 변경은 예약 ID와 함께 변경할 시간, 장소를 말씀해 주세요.",
    ("확인", "조회"): "[FAQ] 예약 내용을 확인하려면 예약 ID를 알려주세요. 확인 후 상세 정보를 안내해 드릴게요.",
    ("가능", "비어 있", "여유"): "[FAQ] 특정 시간에 예약이 가능한지 알고 싶으시면 날짜와 장소를 함께 말씀해 주세요.",
    ("비용", "가격", "요금"): "[FAQ] 예약 서비스는 무료입니다. 단, 장소에 따라 별도의 이용 요금이 있을 수 있어요.",
    ("고객센터", "문의"): "[FAQ] 고객센터는 09:00~18:00 운영되며, 전화 1234-5678 또는 카카오톡으로 문의하실 수 있어요.",
    ("회원", "로그인"): "[FAQ] 비회원도 예약은 가능하지만, 회원 로그인 시 예약 내역을 쉽게 조회하고 관리할 수 있습니다.",
}

@tool
def faq_tool(question: str) -> str:
    """
    예약 관련 자주 묻는 질문에 응답합니다.

    Args:
        question (str): 사용자의 일반적인 질문

    Returns:
        str: 안내 메시지
    """
    q = question.lower()
    for keywords, response in FAQ_MAP.items():
        if any(k in q for k in keywords):
            return response
    return "[FAQ] 해당 질문은 등록된 FAQ에 없습니다. 궁금하신 내용을 구체적으로 말씀해 주세요!"